name: "Deploy all given apps on the given stage"
description: "does what it says in the name"

inputs:
  stage:
    description: The stage on which the apps shall be deployed
    required: true

  apps:
    description: list of apps
    required: true

runs:
  using: composite
  steps:
    - name: Create releases
      run: |
        declare -A stages
        for stage in $(echo '${{ inputs.apps }}' | jq '.[]'); do
          stages[$stage]=release_id_from_setops
        done

        for stage in $stages; do
          echo "Creating Release:"
        done

        echo $stages["web"]
        echo $stages["foo"]
        echo $stages["clock"]
        echo $stages[clock]
        echo $stages["worker"]
      shell: bash
